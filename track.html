<!doctype html>
<html lang="ru">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Tick — Трек</title><link rel="stylesheet" href="/static/style.css"></head>
<body>
  <div class="header"><div class="brand"><h1>Tick</h1></div><div class="nav"><a href="/">Главная</a><a href="/playlists">Плейлисты</a><a href="/albums">Альбомы</a><a href="/stats">Статистика</a><a href="/settings">Настройки</a></div></div>

  <div class="container">
    <div class="card">
      <h2 id="tTitle">Трек</h2>
      <div id="tDetails"></div>
      <div style="margin-top:12px">
        <button class="button" onclick="export432()">Экспорт 432Hz</button>
        <button class="small" onclick="exportRaw()">Скачать оригинал</button>
      </div>
    </div>
  </div>

<script>
  async function load(){
    const params = new URLSearchParams(location.search);
    const id = params.get('id') || 't1';
    const r = await fetch('/api/tracks/' + id);
    const data = await r.json();
    if(!data.ok) return;
    document.getElementById('tTitle').textContent = data.track.title + ' — ' + data.track.artist;
    document.getElementById('tDetails').innerHTML = `<img src="${data.track.cover}" style="width:220px;height:220px;object-fit:cover;border-radius:8px">`;
  }
  function export432(){ const id = new URLSearchParams(location.search).get('id') || 't1'; window.location = '/api/export/' + id + '?mode=432'; }
  function exportRaw(){ const id = new URLSearchParams(location.search).get('id') || 't1'; window.location = '/api/export/' + id + '?mode=raw'; }
  window.addEventListener('DOMContentLoaded', load);
</script>
</body>
</html>
